# Data Migration with sfdx-hardis (SFDMU)

This project uses sfdx-hardis to orchestrate data export/import via SFDMU plans.

## Prerequisites
- Salesforce CLI (`sf`)
- sfdx-hardis plugin: `sf plugins install sfdx-hardis`
- Authenticated target org (e.g., `StoreConnect-Dev`)

## Project Structure
- `data/sfdmu/export.json`: Export plan (objects and fields)
- `data/sfdmu/import.json`: Import plan (objects and fields)
- `data/sfdmu/csv/`: CSVs generated by export or used for import

## Data Objects Included
1. **Category__c** - Product categories with descriptions and sort order
2. **Pricebook2** - Standard price book for product pricing
3. **Product2** - Products with categories, stock, and pricing
4. **PricebookEntry** - Product prices linked to price book and products

## One-time setup
```bash
sf hardis:org:configure:data -o StoreConnect-Dev
```

## Export data
Exports data from the target org into `data/sfdmu/csv/` according to the plan.
```bash
sf hardis:org:data:export -o StoreConnect-Dev -p data/sfdmu
```

## Import data
Imports data from `data/sfdmu/csv/` into the target org according to the plan.
```bash
sf hardis:org:data:import -o StoreConnect-Dev -p data/sfdmu
```

## Import Order
The import will automatically handle dependencies:
1. Categories are imported first (upsert by Name)
2. Pricebook2 is imported (upsert by Name)
3. Products are imported with category lookups (upsert by ProductCode)
4. PricebookEntries are imported with product and pricebook lookups

## Notes
- All objects use external IDs for reliable upsert operations
- Categories are automatically linked to products during import
- Pricing data is populated for all products in the Standard Price Book
- Ensure CRUD/FLS and sharing are configured for the running user
- The plans support both export and import operations with proper field mapping
